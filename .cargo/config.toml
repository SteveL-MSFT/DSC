# CFS/ADO crate feed is currently only working with unstable features.
[unstable]
registry-auth = true

[registries]
powershell = { index = "sparse+https://pkgs.dev.azure.com/powershell/PowerShell/_packaging/powershell/Cargo/index/" }

[source.crates-io]
replace-with = "powershell"

# Enable Control Flow Guard (needed for OneBranch's post-build analysis).
[target.'cfg(target_os = "windows")']
rustflags = ["-Ccontrol-flow-guard", "-Ctarget-feature=+crt-static", "-Clink-args=/DYNAMICBASE /CETCOMPAT"]

[target.aarch64-unknown-linux-gnu]
linker = "aarch64-msft-linux-gcc"
